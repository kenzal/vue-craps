import{r as d,b as X,d as q,e as Z,o as m,c as f,a as p,t as H,u as i,w as k,n as M,f as R,_ as F,g as x,h as S,i as J,j as T,k as ee,F as W,l as G,m as U}from"./index-7102971f.js";const te="/vue-craps/assets/puck-off-a835fb57.svg",ae="/vue-craps/assets/puck-on-4b8d7a7e.svg";function z(){return d([1,5,25,100,500])}function $(e){return Math.max.apply(null,z().value.filter(l=>l<=e))}var j=(e=>(e[e.Standard=0]="Standard",e[e.Crapless=1]="Crapless",e))(j||{});const ne={4:3,5:4,6:5,8:5,9:4,10:3},se=function(e,l=j.Standard){let a={4:e,5:e,6:e,8:e,9:e,10:e};return l&&(a={2:e,3:e,...a,11:e,12:e}),a},Y=X({puck_location:4,table:{isCrapless:j.Standard,maxOdds:ne,bet_min:5},existing_bets:[]}),le=["onClick","onContextmenu"],re=["onClick","onContextmenu"],ue=q({__name:"BetBoxNew",props:{modelValue:{type:Object,required:!0},increment:{type:Number,default:1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,n=Z({get(){return a.modelValue},set(v){return l("update:modelValue",v)}}),c=()=>{if(!n.value.canIncrease())return;const v=Y.table.bet_min;n.value.wager=Math.max(v,n.value.wager+a.increment)},o=()=>{"odds"in n.value&&(n.value.odds=Math.min(n.value.maxOdds(),n.value.odds+a.increment))},C=()=>{n.value.wager=Math.max(0,n.value.wager-a.increment);const v=Y.table.bet_min;v&&n.value.wager<v&&(n.value.wager=0),"odds"in n.value&&(n.value.odds=Math.min(n.value.maxOdds(),n.value.odds))},N=()=>{"odds"in n.value&&(n.value.odds=Math.max(0,n.value.odds-a.increment))};return(v,O)=>{var g,P,y,D;return m(),f("div",{class:M(["bet-box",i(n).getOptions().hasOdds?"withOdds":"withoutOdds"])},[p("span",{onClick:k(c,["prevent"]),onContextmenu:k(C,["prevent"]),class:M(["wager","chip-"+i($)(i(n).wager)])},H((g=i(n))!=null&&g.wager?(P=i(n))==null?void 0:P.wager:""),43,le),"odds"in i(n)?(m(),f("span",{key:0,onClick:k(o,["prevent"]),onContextmenu:k(N,["prevent"]),class:M(["wager odds","chip-"+i($)(i(n).odds)])},H((y=i(n))!=null&&y.odds?(D=i(n))==null?void 0:D.odds:""),43,re)):R("",!0)],2)}}});const E=F(ue,[["__scopeId","data-v-76133534"]]);var t=(e=>(e.ANY_CRAPS="AnyCraps",e.ANY_SEVEN="AnySeven",e.BUY="Buy",e.C_AND_E="CE",e.COME="Come",e.CRAPS_3_WAY="Craps3Way",e.DONT_COME="DontCome",e.DONT_PASS="DontPass",e.FIELD="Field",e.HARDWAY="Hardway",e.HOP="Hop",e.HORN="Horn",e.HORN_HIGH="HornHigh",e.LAY="Lay",e.PASS_LINE="PassLine",e.PLACE="Place",e.PUT="Put",e.WORLD="World",e))(t||{});const oe={2:6,3:3,4:2,5:3/2,6:6/5,8:6/5,9:3/2,10:2,11:3,12:6},K={[t.ANY_CRAPS]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.ANY_SEVEN]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.BUY]:{hasOdds:!1,allowOverride:!0,hasPlacement:!0,hasVig:!0},[t.C_AND_E]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.COME]:{hasOdds:!0,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.CRAPS_3_WAY]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.DONT_COME]:{hasOdds:!0,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.DONT_PASS]:{hasOdds:!0,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.FIELD]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.HARDWAY]:{hasOdds:!1,allowOverride:!0,hasPlacement:!0,hasVig:!1},[t.HOP]:{hasOdds:!1,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.HORN]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1},[t.HORN_HIGH]:{hasOdds:!1,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.LAY]:{hasOdds:!1,allowOverride:!1,hasPlacement:!0,hasVig:!0},[t.PASS_LINE]:{hasOdds:!0,allowOverride:!1,hasPlacement:!0,hasVig:!1},[t.PLACE]:{hasOdds:!1,allowOverride:!0,hasPlacement:!0,hasVig:!1},[t.PUT]:{hasOdds:!0,allowOverride:!0,hasPlacement:!0,hasVig:!1},[t.WORLD]:{hasOdds:!1,allowOverride:!1,hasPlacement:!1,hasVig:!1}},u=function(){return K[this.type]},Q=function(){if(this.placement!==void 0&&this.wager!==void 0){const e=this.placement,n=Y.table.maxOdds[e],c=this.wager;return Math.floor(n*c)}return 0},ce=function(){if(typeof this.placement!="number"||this.wager===void 0)return 0;const e=Q.bind(this)();console.log(e);const l=oe[this.placement];return Math.floor(e*l)},I={[t.ANY_CRAPS]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.ANY_SEVEN]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.BUY]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.C_AND_E]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.COME]:{getOptions:u,canIncrease(){return!0},canDecrease(){return this.placement===null},canRemove(){return this.placement===null}},[t.CRAPS_3_WAY]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.DONT_COME]:{getOptions:u,canIncrease(){return this.placement===null},canDecrease(){return!0},canRemove(){return!0}},[t.DONT_PASS]:{getOptions:u,canIncrease(){return this.placement===null},canDecrease(){return!0},canRemove(){return!0}},[t.FIELD]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.HARDWAY]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.HOP]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.HORN]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.HORN_HIGH]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.LAY]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.PASS_LINE]:{getOptions:u,canIncrease(){return!0},canDecrease(){return this.placement===null},canRemove(){return this.placement===null}},[t.PLACE]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}},[t.PUT]:{getOptions:u,canIncrease(){return!0},canDecrease(){return this.placement===null},canRemove(){return this.placement===null}},[t.WORLD]:{getOptions:u,canIncrease(){return!0},canDecrease(){return!0},canRemove(){return!0}}};function L(e,l,a=null){const n=e.filter(c=>c.type===l);return K[l].hasPlacement?n.filter(c=>"placement"in c&&c.placement===a).pop():n.pop()}const ie={class:"CrapsBox"},de={class:"name-box full-box"},me={key:0,alt:"ON",class:"puck",src:ae},pe=q({__name:"CrapsBox",props:{boxNumber:{type:Number,required:!0},maxOdds:{type:Number,default:0},minBet:{type:Number,default:0},increment:{type:Number,default:1},buyAllowed:{type:Boolean,default:!1},initialBets:{type:Array,default(){return[]}}},setup(e,{expose:l}){const a=e,n=function(){let V=[];return _.value.wager&&V.push(_.value),s.value.wager&&V.push(s.value),r.value.wager&&V.push(r.value),h.value.wager&&V.push(h.value),A.value.wager&&V.push(A.value),V},c={type:t.DONT_COME,...I[t.DONT_COME],maxOdds:ce,wager:0,odds:0,placement:a.boxNumber},o={type:t.LAY,...I[t.LAY],wager:0,placement:a.boxNumber},C={type:t.COME,...I[t.COME],maxOdds:Q,wager:0,odds:0,placement:a.boxNumber},N={type:t.PLACE,...I[t.PLACE],wager:0,placement:a.boxNumber,override_puck:null},v={type:t.BUY,...I[t.BUY],wager:0,placement:a.boxNumber,override_puck:null},O=L(a.initialBets,t.DONT_COME,a.boxNumber)??{},g=L(a.initialBets,t.LAY,a.boxNumber)??{},P=L(a.initialBets,t.COME,a.boxNumber)??{},y=L(a.initialBets,t.PLACE,a.boxNumber)??{},D=L(a.initialBets,t.BUY,a.boxNumber)??{},A=d(Object.assign(c,O)),h=d(Object.assign(o,g)),r=d(Object.assign(C,P)),s=d(Object.assign(N,y)),_=d(Object.assign(v,D));return l({getBets:n}),(V,b)=>(m(),f("div",ie,[x(E,{modelValue:A.value,"onUpdate:modelValue":b[0]||(b[0]=w=>A.value=w),increment:e.increment,class:"full-box"},null,8,["modelValue","increment"]),x(E,{modelValue:h.value,"onUpdate:modelValue":b[1]||(b[1]=w=>h.value=w),increment:e.increment,class:"full-box"},null,8,["modelValue","increment"]),p("div",de,[S(H(e.boxNumber===6?"Six":e.boxNumber===9?"Nine":e.boxNumber)+" ",1),i(Y).puck_location===a.boxNumber?(m(),f("img",me)):R("",!0)]),x(E,{modelValue:r.value,"onUpdate:modelValue":b[2]||(b[2]=w=>r.value=w),increment:e.increment,class:"full-box"},null,8,["modelValue","increment"]),x(E,{modelValue:s.value,"onUpdate:modelValue":b[3]||(b[3]=w=>s.value=w),increment:e.increment,class:"half-box"},null,8,["modelValue","increment"]),e.buyAllowed?(m(),J(E,{key:0,modelValue:_.value,"onUpdate:modelValue":b[4]||(b[4]=w=>_.value=w),increment:e.increment,class:"half-box"},null,8,["modelValue","increment"])):R("",!0)]))}});const fe=F(pe,[["__scopeId","data-v-e9d7c1bc"]]);const ve=["onClick","onContextmenu"],Oe={key:0,class:"name"},ge={__name:"BetBox",props:{modelValue:{type:Number,default:0},max:{type:Number,default:1/0},min:{type:Number,default:0},increment:{type:Number,default:1},locked:{type:Boolean,default:!1},noDecrease:{type:Boolean,default:!1},noIncrease:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,n=()=>{a.locked||a.noIncrease||l("update:modelValue",Math.min(a.max,Math.max(a.min,a.modelValue+a.increment)))},c=()=>{if(a.locked||a.noDecrease)return;let o=Math.max(0,a.modelValue-a.increment);a.min&&o<a.min&&(o=0),l("update:modelValue",o)};return T(()=>a.max,o=>{o<a.modelValue&&l("update:modelValue",Math.min(o.valueOf(),a.modelValue))}),(o,C)=>(m(),f("div",{class:"bet-box",onClick:k(n,["prevent"]),onContextmenu:k(c,["prevent"])},[o.$slots.default?(m(),f("span",Oe,[ee(o.$slots,"default",{},void 0,!0)])):R("",!0),e.modelValue?(m(),f("span",{key:1,class:M(["wager","chip-"+i($)(e.modelValue)])},H(e.modelValue),3)):R("",!0)],40,ve))}},B=F(ge,[["__scopeId","data-v-46d1b011"]]);const _e={class:"crapsTable"},he={class:"dont-come"},be=p("span",null,"Don't",-1),xe=p("span",null,"Come",-1),Ve=p("span",null,"Bar",-1),we=p("span",null,"12",-1),Ce={key:0,src:te,alt:"OFF",class:"puck"},Ne=p("div",{class:"props-box"},null,-1),Pe=p("div",{class:"props-box"},null,-1),ye={class:"self-serve"},De={class:"bet-select"},Ae=["onClick"],ke={__name:"CrapsView",setup(e){const l=d([]),a=d(0),n=d(0),c=d(0),o=d(0),C=d(0),N=d(0),v=z(),O=d(1),g=5,P={maxOdds:se(2)},y=JSON.parse('{"new_table":{"config":{},"puck_location":4,"existing_bets":[{"type":"PassLine","wager":5,"placement":4},{"type":"DontCome","wager":5,"placement":6,"odds":10},{"type":"Place","wager":5,"placement":4},{"type":"Place","wager":5,"placement":5},{"type":"Place","wager":6,"placement":6,"override_puck":"OFF"},{"type":"Place","wager":6,"placement":8},{"type":"Place","wager":5,"placement":9},{"type":"Place","wager":5,"placement":10},{"type":"Hop","wager":1,"placement":[1,3]},{"type":"AnySeven","wager":1}]}}'),D=function(h){O.value=h},A=function(){let h=[];for(const r in l.value)h.push(...l.value[r].getBets());console.log(h)};return(h,r)=>(m(),f(W,null,[p("div",_e,[(m(!0),f(W,null,G(P.maxOdds,(s,_)=>(m(),J(fe,{key:_,increment:O.value,"max-odds":s,"min-bet":[6,8].includes(Number(_))?g/5*6:g,"box-number":Number(_),"buy-allowed":[4,10].includes(Number(_)),"initial-bets":i(y).new_table.existing_bets.filter(V=>V.placement===Number(_)),ref_for:!0,ref_key:"boxes",ref:l},null,8,["increment","max-odds","min-bet","box-number","buy-allowed","initial-bets"]))),128)),p("div",he,[be,xe,Ve,we,i(Y).puck_location===null?(m(),f("img",Ce)):R("",!0)]),Ne,Pe,p("div",ye,[x(B,{increment:O.value,modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=s=>a.value=s),min:g,style:{"grid-column":"col / span 2"},name:"comeLine"},{default:U(()=>[S("Come")]),_:1},8,["increment","modelValue"]),x(B,{increment:O.value,modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=s=>n.value=s),min:g,style:{"grid-column":"col / span 2"},name:"fieldLine"},{default:U(()=>[S("Field")]),_:1},8,["increment","modelValue"]),x(B,{increment:O.value,modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=s=>c.value=s),min:g,name:"dontLine",style:{}},{default:U(()=>[S("Don't Pass Bar 12")]),_:1},8,["increment","modelValue"]),x(B,{increment:O.value,modelValue:o.value,"onUpdate:modelValue":r[3]||(r[3]=s=>o.value=s),name:"dontLineOdds",locked:""},null,8,["increment","modelValue"]),x(B,{increment:O.value,modelValue:C.value,"onUpdate:modelValue":r[4]||(r[4]=s=>C.value=s),min:g,name:"passLine"},{default:U(()=>[S("Pass")]),_:1},8,["increment","modelValue"]),x(B,{increment:O.value,modelValue:N.value,"onUpdate:modelValue":r[5]||(r[5]=s=>N.value=s),name:"passLineOdds",locked:""},null,8,["increment","modelValue"])])]),p("ul",De,[(m(!0),f(W,null,G(i(v),s=>(m(),f("li",{key:s,onClick:_=>D(s),class:M("wager chip-"+s)},H(s),11,Ae))),128))]),p("button",{onClick:A},"Test")],64))}};export{ke as default};
